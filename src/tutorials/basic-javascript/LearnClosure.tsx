/* 

------ ğŸ‘‰ é—­åŒ…çš„å®šä¹‰ ------
é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°å’Œå…¶å®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼ˆscopeï¼‰çš„ç»„åˆã€‚
æ¢å¥è¯è¯´ï¼Œé—­åŒ…å…è®¸ä¸€ä¸ªå‡½æ•°â€œè®°ä½â€å®ƒè¢«åˆ›å»ºæ—¶çš„ç¯å¢ƒï¼Œå³ä¾¿è¿™ä¸ªå‡½æ•°æ˜¯åœ¨ç¯å¢ƒä¹‹å¤–è¢«è°ƒç”¨çš„ã€‚
å®ƒè§£å†³çš„é—®é¢˜æ˜¯ï¼šå‡½æ•°åœ¨å¤–éƒ¨è°ƒç”¨æ—¶ä»ç„¶èƒ½è®¿é—®å®ƒåŸæœ¬ä½œç”¨åŸŸé‡Œçš„å˜é‡ã€‚

------ ğŸ‘‰ é—­åŒ…çš„æ ¸å¿ƒ â€” è¿”å›ä¸€ä¸ªå‡½æ•° ------
é—­åŒ…æœ€å…¸å‹çš„å½¢å¼æ˜¯ å‡½æ•°ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è¿”å›ï¼ŒåŒæ—¶è¿˜èƒ½è®¿é—®å¤–éƒ¨çš„å˜é‡ã€‚
function outer() {
    let count = 0;
    return function inner() {
        count++;
        console.log(count);
    };
}
const fn = outer();
fn(); // 1
fn(); // 2
fn(); // 3

è§£é‡Šï¼š
- outer() æ‰§è¡Œåï¼Œè¿”å›äº† inner å‡½æ•°ã€‚
- å³ä½¿ outer() æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›çš„ inner å‡½æ•° ä¾ç„¶è®°å¾— count å˜é‡ã€‚
- è¿™ä¸ª â€œè®°å¾—å¤–å±‚å˜é‡â€çš„èƒ½åŠ›å°±æ˜¯é—­åŒ…çš„ç²¾é«“ã€‚
- å¯ä»¥ç†è§£ä¸ºï¼šé—­åŒ… = å‡½æ•° + å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸç¯å¢ƒã€‚

------ ğŸ‘‰ é—­åŒ…ä¸­å˜é‡ä¸ä¼šé”€æ¯çš„åŸå›  ------
å…³é”®ç‚¹åœ¨äºï¼š
- outer() æ‰§è¡Œæ—¶ï¼Œåˆ›å»ºäº† count å˜é‡ï¼Œå¹¶è¿”å›äº† inner å‡½æ•°ã€‚
- è¿”å›çš„ inner å‡½æ•° ä»ç„¶æŒæœ‰å¯¹ count çš„å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨å°±æ˜¯é—­åŒ…ã€‚
- å› ä¸º fnï¼ˆå°±æ˜¯ innerï¼‰è¿˜å¯ä»¥è®¿é—® countï¼Œæ‰€ä»¥ JS å¼•æ“ä¸ä¼šå›æ”¶å®ƒã€‚
æ¢å¥è¯è¯´ï¼šåªè¦æœ‰é—­åŒ…åœ¨ä½¿ç”¨ï¼Œå¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡å°±ä¸ä¼šè¢«é”€æ¯ã€‚


------ ğŸ‘‰ ç»å…¸ä¾‹å­ ------
function makeCounter() {
    let count = 0;  // å±€éƒ¨å˜é‡
    return function() { // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯é—­åŒ…
        count++;
        return count;
    };
}
const counter = makeCounter();
console.log(counter()); // 1
console.log(counter()); // 2
console.log(counter()); // 3
è§£é‡Šï¼š
- makeCounter å†…éƒ¨æœ‰ä¸€ä¸ªå˜é‡ countã€‚
- å®ƒè¿”å›äº†ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œè¿™ä¸ªå†…éƒ¨å‡½æ•°ä½¿ç”¨äº† countã€‚
- è™½ç„¶ makeCounter æ‰§è¡Œå®Œåæœ¬è¯¥é”€æ¯ä½œç”¨åŸŸé‡Œçš„ countï¼Œä½†é—­åŒ…è®©è¿”å›çš„å‡½æ•°ä»ç„¶å¯ä»¥è®¿é—® countã€‚
- æ‰€ä»¥ counter() æ¯æ¬¡è°ƒç”¨éƒ½èƒ½è®°ä½ä¸Šä¸€æ¬¡çš„ count å€¼ã€‚

------ ğŸ‘‰ é—­åŒ…çš„ç‰¹ç‚¹ ------
1. å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸã€‚
2. å½¢æˆç§æœ‰å˜é‡ï¼šé—­åŒ…ä¸­çš„å˜é‡å¯¹å¤–ç•Œä¸å¯ç›´æ¥è®¿é—®ï¼Œåªèƒ½é€šè¿‡å‡½æ•°æ“ä½œã€‚
3. å¸¸ç”¨äºæ•°æ®å°è£…ã€å·¥å‚å‡½æ•°ã€å›è°ƒå‡½æ•°å’Œäº‹ä»¶å¤„ç†ã€‚

------ ğŸ‘‰ é—­åŒ…çš„ä½œç”¨ ------
æ€»ç»“é—­åŒ…ä½œç”¨
ä¿å­˜çŠ¶æ€ï¼ˆè®°å¿†å˜é‡ï¼‰
æ•°æ®å°è£… / ç§æœ‰å˜é‡
å‡½æ•°å·¥å‚ / åŠ¨æ€ç”Ÿæˆå‡½æ•°
æ¨¡å—åŒ– / é¿å…å…¨å±€æ±¡æŸ“
å»¶é•¿å˜é‡ç”Ÿå‘½å‘¨æœŸï¼Œæ–¹ä¾¿å¼‚æ­¥æ“ä½œ

*/

const LearnClosure = () => {
  function makeCounter() {
    let count = 0; // å±€éƒ¨å˜é‡

    return function () {
      // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯é—­åŒ…
      count++;
      return count;
    };
  }

  const counter = makeCounter();

  console.log(counter()); // 1
  console.log(counter()); // 2
  console.log(counter()); // 3

  return <div>Check console</div>;
};

export default LearnClosure;
